<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>工具链：什么样的工具链才能提升团队效率？ | Enchanter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="你好，我是winter。今天我们的主题是工具。 古语云：“工欲善其事，必先利其器”，程序员群体对工具的爱好和重视是一个悠久的传统。简单趁手的工具是程序员开发的好帮手。 但是在工程方面，工具不仅仅是简单的“趁手”即可，假如一个团队人人都自己发明几个小工具，那么后果将会是灾难性的：同一个团队的同学无法互相配合写代码，一旦有人离职，可能某一个项目就永远无法跑起来了。 所以我们今天从工程的角度谈一谈工具体">
<meta property="og:type" content="article">
<meta property="og:title" content="工具链：什么样的工具链才能提升团队效率？">
<meta property="og:url" content="http://yoursite.com/2019/08/31/重学前端/工具链：什么样的工具链才能提升团队效率？/index.html">
<meta property="og:site_name" content="Enchanter">
<meta property="og:description" content="你好，我是winter。今天我们的主题是工具。 古语云：“工欲善其事，必先利其器”，程序员群体对工具的爱好和重视是一个悠久的传统。简单趁手的工具是程序员开发的好帮手。 但是在工程方面，工具不仅仅是简单的“趁手”即可，假如一个团队人人都自己发明几个小工具，那么后果将会是灾难性的：同一个团队的同学无法互相配合写代码，一旦有人离职，可能某一个项目就永远无法跑起来了。 所以我们今天从工程的角度谈一谈工具体">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://static001.geekbang.org/resource/image/7c/b1/7ca7c24e92d25bde2e8609ed5386b5b1.jpg">
<meta property="og:updated_time" content="2019-08-31T09:51:13.220Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="工具链：什么样的工具链才能提升团队效率？">
<meta name="twitter:description" content="你好，我是winter。今天我们的主题是工具。 古语云：“工欲善其事，必先利其器”，程序员群体对工具的爱好和重视是一个悠久的传统。简单趁手的工具是程序员开发的好帮手。 但是在工程方面，工具不仅仅是简单的“趁手”即可，假如一个团队人人都自己发明几个小工具，那么后果将会是灾难性的：同一个团队的同学无法互相配合写代码，一旦有人离职，可能某一个项目就永远无法跑起来了。 所以我们今天从工程的角度谈一谈工具体">
<meta name="twitter:image" content="https://static001.geekbang.org/resource/image/7c/b1/7ca7c24e92d25bde2e8609ed5386b5b1.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Enchanter" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Enchanter</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-重学前端/工具链：什么样的工具链才能提升团队效率？" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/31/重学前端/工具链：什么样的工具链才能提升团队效率？/" class="article-date">
  <time datetime="2019-08-31T09:44:04.945Z" itemprop="datePublished">2019-08-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/重学前端/">重学前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      工具链：什么样的工具链才能提升团队效率？
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>你好，我是winter。今天我们的主题是工具。</p>
<p>古语云：“工欲善其事，必先利其器”，程序员群体对工具的爱好和重视是一个悠久的传统。简单趁手的工具是程序员开发的好帮手。</p>
<p>但是在工程方面，工具不仅仅是简单的“趁手”即可，假如一个团队人人都自己发明几个小工具，那么后果将会是灾难性的：同一个团队的同学无法互相配合写代码，一旦有人离职，可能某一个项目就永远无法跑起来了。</p>
<p>所以我们今天从工程的角度谈一谈工具体系的规划。</p>
<h2 id="工具总论"><a href="#工具总论" class="headerlink" title="工具总论"></a>工具总论</h2><p>跟性能不同，工具体系并非业务结果，所以我们没法用简单的数据指标来衡量工具，它的结果更多程度是一种开发体验：帮助技术团队内的同学提升效率和体验。</p>
<p>作为工程体系，我们考虑工具的时候同样要遵循基本规则：现状与指标、方案、实施、结果和监控。</p>
<p>不过，对工具而言，指标和结果都是一种“软性指标”，也就是团队的开发效率和开发体验。这里我不太推荐把开发效率和开发体验过度数据化，我的经验是：开发效率提升n倍永远是一种臆想或者主观论断。</p>
<h2 id="工具体系的目标"><a href="#工具体系的目标" class="headerlink" title="工具体系的目标"></a>工具体系的目标</h2><p>前面已经讲到，工具是为技术团队本身服务的工程体系，那么，工具的目标是什么呢？其实每一种工具的出现，必然都有一个非常具体的目标，比如npm帮助我们进行包管理，Yeoman帮助我们初始化项目模板。</p>
<p>但是这些目标是工具的目标，不是工具体系的目标。我们做一个假设，<strong>假如你是一个前端团队的工具体系负责人，现在要你来规划团队的工具体系，你会怎么做呢？</strong></p>
<p>如果你到社区找了一大堆工具，并且把它们要解决的问题都罗列出来，作为工具体系的目标，那就完全走上了错误的道路。</p>
<p>实际上，在考虑具体的工具之前，我们应该解决工具体系的“元问题”，即：我们对工具本身的要求是什么？</p>
<p><strong>考虑到工程行为都是团队合作，我们对工具最基本的要求就是：版本一致。</strong></p>
<p>只有整个团队的工具版本一致，至少要做到避免大版本差异，才能做到互相接手代码时，团队成员能够正确的使用工具开发。</p>
<p><strong>工具体系的另一个重要需求是：避免冲突</strong>，一些工具可能互相没有干扰，比如Yeoman和gulp，有一些工具则由社区设计了配合方案，比如webpack和babel，有一些工具，则存在着根本性冲突，如gulp和grunt。</p>
<p>所以，在谈及具体问题之前，我们必须要有这两个要求的解决方案。<strong>这就需要引入一个新的概念：工具链。</strong></p>
<p>工具链是一系列互相配合的工具，能够协作完成开发任务（注：工具链这个词最早是由C/C++程序员引入的概念，一般包含编译、链接、调试等工具）。</p>
<p>下面我们就来谈谈工具链的设计。</p>
<h2 id="工具体系的设计"><a href="#工具体系的设计" class="headerlink" title="工具体系的设计"></a>工具体系的设计</h2><p>要想设计一个工具链，首先我们需要整理一下，前端开发大约要做哪些事，下面是我的答案：</p>
<ul>
<li>初始化项目；</li>
<li>运行和调试；</li>
<li>测试（单元测试）；</li>
<li>发布。</li>
</ul>
<p>那么，一个前端项目的工具链，大约就会包含这些功能。一个典型的社区项目工具链可能就类似下面这样：</p>
<ul>
<li>Yeoman</li>
<li>webpack</li>
<li>ava/nyc</li>
<li>aws-cli</li>
</ul>
<p>但是，这显然不够，我们还需要一种机制，保证团队使用的工具版本一致。</p>
<p>轻量级的做法是，在项目初始化模板中定义npm script并且在npm dev-dependency中规定它的版本号。</p>
<p>重量级的做法是，开发一个包装工具，在命令行中不直接使用命令，而使用包装过的命令。如在我之前的团队，使用的工具名为def，它规定了一些命令：</p>
<ul>
<li>def init</li>
<li>def dev</li>
<li>def test</li>
<li>def publish</li>
</ul>
<p>这样，工具链的使用者只需指定工具链名称，就不需要知道项目具体使用了哪些工具，这样只需要专注自己的需求就够了。</p>
<p>同时，统一的命令行入口，意味着整个团队不需要互相学习工具链，就可以接手别人的项目开发。</p>
<p>在稍微大一些的团队内部，往往会需要不止一种开发模式，如移动开发和桌面开发，这样，所需要的工具链也不一样，因此我们需要多条工具链。</p>
<p>要想开发新的工具链，可以使用复制分支的方式来扩展原来的工具链。在我原来的工作中，不同的工具链被称作“套件”，每一种套件对应着一组互相配合的工具。</p>
<h2 id="工具体系的执行"><a href="#工具体系的执行" class="headerlink" title="工具体系的执行"></a>工具体系的执行</h2><p>因为工具体系服务的是团队内部成员，所以执行非常简单，同时，工具体系的入口是初始化项目，所以只要初始化工具在手，可以控制其它所有工具。</p>
<p>我们在性能的那一课里，已经讲过工程体系的执行分成三个层次：纯管理、制度化和自动化。</p>
<p>工具体系因为其自身特性，可以说是最容易做到自动化的一个体系了。</p>
<h2 id="工具体系的监控"><a href="#工具体系的监控" class="headerlink" title="工具体系的监控"></a>工具体系的监控</h2><p>工具体系的结果虽然是软性的，也不能完全不做监控。</p>
<p>纯粹的社区方案比较难做到监控，但是如果我们使用了前面提到的统一命令行入口包装，那么就可以做一些简单的统计工作了。</p>
<p>一般来说，以下指标跟开发者体验较为相关：</p>
<ul>
<li>调试/构建次数；</li>
<li>构建平均时长；</li>
<li>使用的工具版本；</li>
<li>发布次数。</li>
</ul>
<p>在我之前的工作中，工具团队曾经从构建平均时长数据中发现构建效率问题，对webpack做了大量深度优化来改善开发体验。</p>
<p>同时，工具的相关数据还能够帮助发现一些问题，比如某个项目频繁发布，可能说明它风险很高。工具的相关数据还能帮我们发现老旧的工具，如果某个套件使用频率极低，则可以考虑把它下线。</p>
<p>总之，工具体系的监控不仅仅是衡量工具体系的好帮手，也是非常珍贵的研发数据，里面有很多可挖掘的价值。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这一课，我们讲解了工具相关的工程知识。</p>
<p>我们仍然从目标、方案设计、执行和结果四个方面来讲解，工具体系的目标除了单个工具解决具体问题之外，还要注意一致性和配合问题，因此我们需要工具链。</p>
<p>工具链一般会涵盖研发阶段的各个主要操作。工具体系的执行比较简单，很容易就可以做到完全的自动化。工具体系的监控同样非常重要，工具的监控除了帮助我们改进工具体系，对研发体系的其它部分也有帮助。</p>
<p>最后，请你思考下自己所在的团队，是否已经建立了工具体系？听完了今天的课程，你认为它有哪些可改进的部分？</p>
<p><img src="https://static001.geekbang.org/resource/image/7c/b1/7ca7c24e92d25bde2e8609ed5386b5b1.jpg" alt></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/31/重学前端/工具链：什么样的工具链才能提升团队效率？/" data-id="cjzzddwu20009xmqgpqgze4dg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/08/31/重学前端/持续集成：几十个前端一起工作，如何保证工作质量？/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          持续集成：几十个前端一起工作，如何保证工作质量？
        
      </div>
    </a>
  
  
    <a href="/2019/08/31/重学前端/性能：前端的性能到底对业务数据有多大的影响？/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">性能：前端的性能到底对业务数据有多大的影响？</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/重学前端/">重学前端</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript进阶/">javascript进阶</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/javascript进阶/" style="font-size: 10px;">javascript进阶</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/08/31/重学前端/加餐 | 一个前端工程师到底需要掌握哪些技能？/">加餐 | 一个前端工程师到底需要掌握哪些技能？</a>
          </li>
        
          <li>
            <a href="/2019/08/31/重学前端/尾声 | 长风破浪会有时，直挂云帆济沧海/">尾声 | 长风破浪会有时，直挂云帆济沧海</a>
          </li>
        
          <li>
            <a href="/2019/08/31/重学前端/期末答疑（二）：前端架构中，每个逻辑页面如何可以做到独立发布呢？/">期末答疑（二）：前端架构中，每个逻辑页面如何可以做到独立发布呢？</a>
          </li>
        
          <li>
            <a href="/2019/08/31/重学前端/期末答疑（一）：前端代码单元测试怎么做？/">期末答疑（一）：前端代码单元测试怎么做？</a>
          </li>
        
          <li>
            <a href="/2019/08/31/重学前端/前端架构：前端架构有哪些核心问题？/">前端架构：前端架构有哪些核心问题？</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 xcool<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>